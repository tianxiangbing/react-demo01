webpackJsonp([1],{0:function(e,t,n){e.exports=n(120)},44:function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;if(void 0===u)return;return u.call(i)}var c=Object.getPrototypeOf(a);if(null===c)return;e=c,t=o,n=i,r=!0,l=c=void 0}},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(3),f=r(s),d=n(138),p=r(d),m=n(134),h=r(m),y=n(137),v=r(y),g=n(132),b=n(133),E=r(b),T="data-react-helmet",O=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},S=function(e,t){for(var n=[].concat(e).reverse(),r=0;r<n.length;r++){var a=n[r];if(a[t])return a[t]}return null},w=function(e){var t=S(e,"title"),n=S(e,"titleTemplate");if(n&&t)return n.replace(/\%s/g,t);var r=S(e,"defaultTitle");return t||r||""},N=function(e){return S(e,"onChangeClientState")||function(){}},A=function(e){return e.filter(function(e){return"undefined"!=typeof e[g.TAG_NAMES.HTML]}).map(function(e){return e[g.TAG_NAMES.HTML]}).reduce(function(e,t){return c({},e,t)},{})},k=function(e,t){return t.filter(function(e){return"undefined"!=typeof e[g.TAG_NAMES.BASE]}).map(function(e){return e[g.TAG_NAMES.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),a=0;a<r.length;a++){var o=r[a],i=o.toLowerCase();if(-1!==e.indexOf(i))return t.concat(n)}return t},[])},j=function(e,t,n){var r={},a=n.filter(function(t){return"undefined"!=typeof t[e]}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var a={};n.filter(function(e){for(var n=void 0,o=Object.keys(e),i=0;i<o.length;i++){var l=o[i],u=l.toLowerCase();-1===t.indexOf(u)||n===g.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||u===g.TAG_PROPERTIES.REL&&"stylesheet"===e[u].toLowerCase()||(n=u),-1===t.indexOf(l)||l!==g.TAG_PROPERTIES.INNER_HTML&&l!==g.TAG_PROPERTIES.CSS_TEXT||(n=l)}if(!n)return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),a[n]||(a[n]={}),r[n][c]?!1:(a[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var o=Object.keys(a),i=0;i<o.length;i++){var l=o[i],u=(0,v["default"])({},r[l],a[l]);r[l]=u}return e},[]).reverse();return a},P=function(e){document.title=e||document.title},_=function(e){for(var t=document.getElementsByTagName("html")[0],n=t.getAttribute(T),r=n?n.split(","):[],a=[].concat(r),o=Object.keys(e),i=0;i<o.length;i++){var l=o[i],u=e[l]||"";t.setAttribute(l,u),-1===r.indexOf(l)&&r.push(l);var c=a.indexOf(l);-1!==c&&a.splice(c,1)}for(var i=a.length-1;i>=0;i--)t.removeAttribute(a[i]);r.length===a.length?t.removeAttribute(T):t.setAttribute(T,r.join(","))},M=function(e,t){var n=document.head||document.querySelector("head"),r=n.querySelectorAll(e+"["+T+"]"),a=Array.prototype.slice.call(r),o=[],i=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if("innerHTML"===r)n.innerHTML=t.innerHTML;else if("cssText"===r)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var l="undefined"==typeof t[r]?"":t[r];n.setAttribute(r,l)}n.setAttribute(T,"true"),a.some(function(e,t){return i=t,n.isEqualNode(e)})?a.splice(i,1):o.push(n)}),a.forEach(function(e){return e.parentNode.removeChild(e)}),o.forEach(function(e){return n.appendChild(e)}),{oldTags:a,newTags:o}},C=function(e){for(var t=Object.keys(e),n="",r=0;r<t.length;r++){var a=t[r],o="undefined"!=typeof e[a]?a+'="'+e[a]+'"':""+a;n+=o+" "}return n.trim()},I=function(e,t){var n="<"+e+" "+T+'="true">'+O(t)+"</"+e+">";return n},x=function(e,t){var n=t.map(function(t){var n=Object.keys(t).filter(function(e){return!("innerHTML"===e||"cssText"===e)}).map(function(e){if("undefined"==typeof t[e])return e;var n=O(t[e]);return e+'="'+n+'"'}).join(" ").trim(),r=t.innerHTML||t.cssText||"";return"<"+e+" "+T+'="true" '+n+(e===g.TAG_NAMES.SCRIPT||e===g.TAG_NAMES.STYLE?">"+r+"</"+e+">":"/>")}).join("");return n},L=function(e,t){var n=[f["default"].createElement(g.TAG_NAMES.TITLE,i({key:t},T,!0),t)];return n},R=function(e,t){var n=t.map(function(t,n){var r=i({key:n},T,!0);return Object.keys(t).forEach(function(e){var n=g.REACT_TAG_MAP[e]||e;if("innerHTML"===n||"cssText"===n){var a=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:a}}else r[n]=t[e]}),f["default"].createElement(e,r)});return n},G=function(e,t){switch(e){case g.TAG_NAMES.TITLE:return{toComponent:function(){return L(e,t)},toString:function(){return I(e,t)}};case g.TAG_NAMES.HTML:return{toComponent:function(){return t},toString:function(){return C(t)}};default:return{toComponent:function(){return R(e,t)},toString:function(){return x(e,t)}}}},H=function(e){var t=e.htmlAttributes,n=e.title,r=e.baseTag,a=e.metaTags,o=e.linkTags,i=e.scriptTags,l=e.styleTags;return{htmlAttributes:G(g.TAG_NAMES.HTML,t),title:G(g.TAG_NAMES.TITLE,n),base:G(g.TAG_NAMES.BASE,r),meta:G(g.TAG_NAMES.META,a),link:G(g.TAG_NAMES.LINK,o),script:G(g.TAG_NAMES.SCRIPT,i),style:G(g.TAG_NAMES.STYLE,l)}},U=function(e){var t=function(t){function n(){a(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return o(n,t),l(n,[{key:"shouldComponentUpdate",value:function(e){return!(0,h["default"])(this.props,e)}},{key:"render",value:function(){return f["default"].createElement(e,this.props)}}],[{key:"propTypes",value:{htmlAttributes:f["default"].PropTypes.object,title:f["default"].PropTypes.string,defaultTitle:f["default"].PropTypes.string,titleTemplate:f["default"].PropTypes.string,base:f["default"].PropTypes.object,meta:f["default"].PropTypes.arrayOf(f["default"].PropTypes.object),link:f["default"].PropTypes.arrayOf(f["default"].PropTypes.object),script:f["default"].PropTypes.arrayOf(f["default"].PropTypes.object),style:f["default"].PropTypes.arrayOf(f["default"].PropTypes.object),onChangeClientState:f["default"].PropTypes.func},enumerable:!0},{key:"peek",value:e.peek,enumerable:!0},{key:"rewind",value:function(){var t=e.rewind();return t||(t=H({htmlAttributes:[],title:"",baseTag:[],metaTags:[],linkTags:[],scriptTags:[],styleTags:[]})),t},enumerable:!0},{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),n}(f["default"].Component);return t},D=function(e){return{htmlAttributes:A(e),title:w(e),baseTag:k([g.TAG_PROPERTIES.HREF],e),metaTags:j(g.TAG_NAMES.META,[g.TAG_PROPERTIES.NAME,g.TAG_PROPERTIES.CHARSET,g.TAG_PROPERTIES.HTTPEQUIV,g.TAG_PROPERTIES.PROPERTY],e),linkTags:j(g.TAG_NAMES.LINK,[g.TAG_PROPERTIES.REL,g.TAG_PROPERTIES.HREF],e),scriptTags:j(g.TAG_NAMES.SCRIPT,[g.TAG_PROPERTIES.SRC,g.TAG_PROPERTIES.INNER_HTML],e),styleTags:j(g.TAG_NAMES.STYLE,[g.TAG_PROPERTIES.CSS_TEXT],e),onChangeClientState:N(e)}},Y=function(e){var t=e.htmlAttributes,n=e.title,r=e.baseTag,a=e.metaTags,o=e.linkTags,i=e.scriptTags,l=e.styleTags,u=e.onChangeClientState;_(t),P(n);var c={baseTag:M(g.TAG_NAMES.BASE,r),metaTags:M(g.TAG_NAMES.META,a),linkTags:M(g.TAG_NAMES.LINK,o),scriptTags:M(g.TAG_NAMES.SCRIPT,i),styleTags:M(g.TAG_NAMES.STYLE,l)},s={},f={};Object.keys(c).forEach(function(e){var t=c[e],n=t.newTags,r=t.oldTags;n.length&&(s[e]=n),r.length&&(f[e]=c[e].oldTags)}),u(e,s,f)},q=(0,p["default"])(D,Y,H);t["default"]=U(q(E["default"])),e.exports=t["default"]},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(71);var r={ajax:function(e,t){var n=Array.prototype.slice.call(arguments,0);return n[0]="/mock/"+n[0]+".json","string"==typeof n[1]&&(n[0]+="?"+n[1],n.pop()),fetch.apply(null,n).then(function(e){return e.json()})},"native":function(e,t){return fetch("/mock/"+e+".json").then(function(e){return e.json()})}};t["default"]=r},119:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),c=r(u),s=n(125),f=(r(s),c["default"].Component),d=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={show:e.show,msg:e.msg},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout(function(){e.setState({show:!1}),e.props.stage.setState({dialog:0})},2e3)}},{key:"render",value:function(){var e="";return this.state.show&&(e=c["default"].createElement("div",{className:"dialog "+this.props.type},this.props.msg)),c["default"].createElement("div",null,e)}}]),t}(f);t["default"]=d},120:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(3),o=r(a),i=n(73),l=n(48),u=n(126),c=(r(u),n(121)),s=r(c),f=n(123),d=r(f),p=n(122),m=r(p),h=n(124),y=r(h);document.documentElement.style.fontSize=document.documentElement.clientWidth/7.5+"px",(0,i.render)(o["default"].createElement(l.Router,{history:l.hashHistory},o["default"].createElement(l.Route,{path:"/",component:s["default"]}),o["default"].createElement(l.Route,{path:"/record",component:d["default"]}),o["default"].createElement(l.Route,{path:"/fieldsign",component:m["default"]}),o["default"].createElement(l.Route,{path:"/selectarea",component:y["default"]})),document.getElementById("app"))},121:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),s=r(c),f=n(48),p=n(44),m=r(p),h=n(127),y=(r(h),n(72)),v=r(y),g=n(130),b=r(g);n(71);var E=n(119),T=r(E),O=s["default"].Component,S=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.isLocated=0,n.state={localInfo:{},lnglatXY:null,recordList:null,showText:"正在加载数据...",corpList:[],currCorp:{},expand:!1,isShowSign:!1,dialog:0},n}return i(t,e),u(t,[{key:"getLngXY",value:function(){return v["default"]["native"]("getPosition")}},{key:"initMap",value:function(){var e=this,t=void 0,n=new AMap.Map("container"),r=this;setTimeout(function(){e.isLocated||(e.state.localInfo.title="",e.state.localInfo.desc="",e.state.localInfo.status=!1,e.setState({localInfo:e.state.localInfo}))},1e3),this.isLocated=0,this.getLngXY().then(function(a){function o(){var e=new AMap.Geocoder({radius:1e3,extensions:"all"});e.getAddress(t,function(e,t){"complete"===e&&"OK"===t.info&&i(t)});var r="<div class = 'iconfont icon-qiandaodingwei mapicon'></div>";new AMap.Marker({map:n,content:r,position:t,offset:new AMap.Pixel(-11,-22)});n.setFitView()}function i(e){var t=e.regeocode.addressComponent,n=t.township+t.street+t.streetNumber,a=t.province+t.city+t.district+n;l&&(n=localStorage.getItem("locName"),a=localStorage.getItem("locAddr")),r.setState({localInfo:{title:n,desc:a,status:!0}})}if(200==a.code){e.isLocated=1,n.setZoom(10),t=a.data;var l=localStorage.getItem("lnglatXY");l?(n.setCenter(JSON.parse(l)),localStorage.removeItem("lnglatXY")):n.setCenter(t),o(),r.setState({lnglatXY:t}),localStorage.setItem("lnglatXY",JSON.stringify(t))}})}},{key:"initCorp",value:function(){var e=this;v["default"]["native"]("getorglist").then(function(e){return console.log(e),e.data}).then(function(t){e.setState({corpList:t});var n=b["default"].load("orgId"),r={};n?t.forEach(function(e){n==e.orgId&&(r=e)}):r=t[0],e.select(r)})}},{key:"componentDidMount",value:function(){var e=this;this.initMap(),this.initCorp(),this.updateTime(),this.timer=setInterval(function(){e.updateTime(),e.initMap()},6e4)}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"select",value:function(e){console.log(arguments),this.state.currCorp=e,this.setState({currCorp:e,expand:!1}),b["default"].save("orgId",e.orgId,{path:"/"}),this.bindSign(),this.updateTime()}},{key:"bindSign",value:function(){var e=this;v["default"].ajax("getDaySign").then(function(t){console.log(t.result),t.result=t.result.map(function(e){return 0!=e.type&&1!=e.type||0==e.status||(4!=e.status?e.className="error":1!=e.status&&2!=d[j].status&&(e.className="loc-error")),0==e.type?0==e.status||4==e.status?e.title="上班打卡":e.title="上班迟到":1==e.type?0==e.status||4==e.status?e.title="下班打卡":e.title="下班早退":2==e.type&&(e.title="外勤签到"),e}),0==t.result.length?e.setState({showText:"您还没有签到哦~"}):e.setState({showText:"",recordList:t.result})})}},{key:"expandOrg",value:function(){this.setState({expand:!this.state.expand})}},{key:"updateTime",value:function(){var e=this;if(this.state.currCorp.orgId){var t={orgId:this.state.currCorp.orgId};v["default"].ajax("getTime",JSON.stringify(t)).then(function(t){if(console.log(t),t.redirect&&(location.href=t.redirect),200==t.code){var n=t.result[0];e.setState({time:n})}else e.setState({dialog:{show:!0,msg:"获取时间异常",type:"alert"}})})}}},{key:"showSign",value:function(){this.setState({isShowSign:!0})}},{key:"sign",value:function(e){var t=this,n={token:"7d171a5fd4954f0c34345c2bbe3f8932",orgId:this.state.currCorp.orgId,orgName:this.state.currCorp.orgName,type:e,placeName:this.state.localInfo.desc,shortPlaceName:this.state.localInfo.title,longitude:this.state.lnglatXY[0],latitude:this.state.lnglatXY[1]};v["default"].ajax("sign",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)}).then(function(e){200==e.code&&t.bindSign()})}},{key:"hideSign",value:function(){this.setState({isShowSign:!1})}},{key:"renderDialog",value:function(){return console.log(this.state.dialog),s["default"].createElement(T["default"],l({stage:this},this.state.dialog))}},{key:"setLocalStorage",value:function(){var e={orgId:this.state.currCorp.orgId,orgName:this.state.currCorp.orgName,time:this.state.time,locName:this.state.localInfo.title,locFullName:this.state.localInfo.desc,locLng:this.state.lnglatXY[0],locLat:this.state.lnglatXY[1]};localStorage.setItem("outInfo",JSON.stringify(e))}},{key:"render",value:function(){var e=this;return s["default"].createElement("div",{className:"body"},s["default"].createElement(m["default"],{title:"签到"}),s["default"].createElement("div",{className:"orgInfo"},s["default"].createElement("div",{className:"focus",onClick:this.expandOrg.bind(this)},this.state.currCorp.orgName," ",s["default"].createElement("i",{className:this.state.expand?"triangle up":"triangle down"})),this.state.expand?s["default"].createElement("div",{className:"orgList"},(this.state.corpList||[]).map(function(t){return s["default"].createElement("div",{className:t.orgId==e.state.currCorp.orgId?"focus":"",onClick:e.select.bind(e,t)},t.orgName)})):null),this.state.expand?s["default"].createElement("div",{className:"mask"}):null,s["default"].createElement("div",{className:"timer"},this.state.time),s["default"].createElement("div",{className:"box downborder"},s["default"].createElement(f.Link,{to:"selectarea"},s["default"].createElement("div",{className:"mapContainer"},s["default"].createElement("div",{ref:"smallMap",id:"container",className:"smallMap"}),s["default"].createElement("div",{className:"mapAdress"},function(){return e.state.localInfo.status?s["default"].createElement("div",null,s["default"].createElement("h2",null,e.state.localInfo.title),s["default"].createElement("p",null,e.state.localInfo.desc)):s["default"].createElement("div",null,s["default"].createElement("h2",null,"定位失败"),s["default"].createElement("p",null,"地点获取失败，请点击",s["default"].createElement("span",{className:"replay",onClick:e.initMap.bind(e)},"这里"),"重试"))}())))),s["default"].createElement("div",{className:"box upborder signRecord"},s["default"].createElement("div",{className:"listSign"},(this.state.recordList||[]).map(function(e){return s["default"].createElement("div",{className:"item"},s["default"].createElement("div",{className:"time"},e.formatTime),s["default"].createElement("div",{className:"desc"},s["default"].createElement("div",{className:"title"},e.title),s["default"].createElement("div",{className:"position"},s["default"].createElement("i",{className:"iconfont icon-qiandaodingwei"}),e.shortPlaceName),function(){return 2==e.type?s["default"].createElement("div",{className:"remark"},e.remark):void 0}()))})),s["default"].createElement("div",{className:"nodata"},this.state.showText)),s["default"].createElement("div",{className:"bottomButton"},s["default"].createElement("div",{className:"button lbutton",onClick:this.showSign.bind(this)},s["default"].createElement("a",{className:"iconfont icon-qiandaokaoqindaqia"}),s["default"].createElement("p",null,"签到")),s["default"].createElement(f.Link,{to:"fieldsign",onClick:this.setLocalStorage.bind(this)},s["default"].createElement("div",{className:"button rbutton"},s["default"].createElement("a",{className:"iconfont icon-qiandaowaiqinqiandao"}),s["default"].createElement("p",null,"外勤签到")))),this.state.isShowSign?s["default"].createElement("div",{className:"mask z-4",onClick:this.hideSign.bind(this)},s["default"].createElement("div",{className:"bottomButton smbutton"},s["default"].createElement("div",{className:"button lbutton",onClick:this.sign.bind(this,0)},s["default"].createElement("a",null,"上班")),s["default"].createElement("div",{className:"button rbutton",onClick:this.sign.bind(this,1)},s["default"].createElement("a",null,"下班")))):null,this.state.dialog?this.renderDialog():void 0)}}]),t}(O);t["default"]=S},122:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),c=r(u),s=n(44),f=(r(s),n(128)),d=(r(f),n(72)),p=r(d),m=c["default"].Component,h=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.outInfo=JSON.parse(localStorage.getItem("outInfo")),n.imgList=[],n.state={text:"",maxlength:50,imgList:[],showUpload:!0,authList:[]},n}return i(t,e),l(t,[{key:"utf16toEntities",value:function(e){var t=/[\ud800-\udbff][\udc00-\udfff]/g;return e=e.replace(/(^\s*)|(\s*$)/g,""),e=e.replace(t,"")}},{key:"changeText",value:function(e){var t=this.utf16toEntities(e.target.value);this.setState({text:t})}},{key:"submit",value:function(){var e={token:"7d171a5fd4954f0c34345c2bbe3f8932",orgId:this.outInfo.orgId,orgName:this.outInfo.orgName,type:2,placeName:this.outInfo.locFullName,shortPlaceName:this.outInfo.locName,longitude:this.outInfo.locLng,latitude:this.outInfo.locLat,remark:this.refs.remark.value,images:this.imgList,authList:this.state.authList};console.log(e),p["default"].ajax("sign",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(function(e){200==e.code&&(location.href="/")})}},{key:"selectPictrues",value:function(){var e=this;p["default"]["native"]("selectPictures",this.state.imgList.length+"&4").then(function(t){if(200==t.code){var n=t.data.map(function(e){return{data:e,uploaded:!1}});console.log(n),n=n.concat(e.state.imgList),e.setState({imgList:n}),n.length>=4&&e.setState({showUpload:!1}),e.upload()}})}},{key:"upload",value:function(){var e=this;this.state.imgList.forEach(function(t,n){if(!t.uploaded){p["default"].ajax("upload").then(function(t){if(200==t.code){var n=t.data,r=n.index;e.state.imgList[r].uploaded=!0,e.setState({imgList:e.state.imgList}),e.imgList.push(n.url)}})}})}},{key:"addUser",value:function(){var e=this;p["default"]["native"]("selectPeopleIOS","500&"+this.outInfo.orgId+"&"+this.outInfo.orgName).then(function(t){var n=t.data;n=n.map(function(e){return{authId:e.uid,authName:e.name}}),e.setState({authList:n})})}},{key:"render",value:function(){return c["default"].createElement("div",{className:"body"},c["default"].createElement("div",{className:"formBox"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"label"},"签到地点:"),c["default"].createElement("div",{className:"info"},this.outInfo.locName)),c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"label"},"签到时间:"),c["default"].createElement("div",{className:"info"},this.outInfo.time)),c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"label"},"当前企业:"),c["default"].createElement("div",{className:"info"},this.outInfo.orgName))),c["default"].createElement("div",{className:"formBox"},c["default"].createElement("textarea",{ref:"remark",onChange:this.changeText.bind(this),value:this.state.text,maxLength:this.state.maxlength,placeholder:"说点什么吧~"}),c["default"].createElement("div",{className:"upload-list"},this.state.imgList.map(function(e){return c["default"].createElement("div",{className:"item"},e.uploaded?void 0:c["default"].createElement("span",{className:"uploading"},"上传中..."),c["default"].createElement("img",{src:"data:image/png;base64,"+e.data}))})),this.state.showUpload?c["default"].createElement("div",{className:"upload-btn iconfont icon-qiandaotianjiazhaopian",onClick:this.selectPictrues.bind(this)}):void 0),c["default"].createElement("div",{className:"formBox"},c["default"].createElement("div",{className:"addUser",onClick:this.addUser.bind(this)},"添加可查看人员",c["default"].createElement("span",null,0==this.state.authList.length?c["default"].createElement("s",null,"本部门"):c["default"].createElement("s",null,this.state.authList.length,"人"),c["default"].createElement("i",null),">"))),c["default"].createElement("div",{className:"btnBottom",onClick:this.submit.bind(this)},"提交"))}}]),t}(m);t["default"]=h},123:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),c=r(u),s=n(44),f=r(s),d=c["default"].Component,p=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return c["default"].createElement("div",null,c["default"].createElement(f["default"],{title:"记录"}),"RECORD",c["default"].createElement("a",{href:"#/"},"index"))}}]),t}(d);t["default"]=p},124:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),c=r(u),s=n(129),f=(r(s),c["default"].Component),d=function(e){function t(e){a(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.currentAddr=null,n.map=null,n.marker=null,n.state={list:[]},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.initMap()}},{key:"initMap",value:function(){var e=this,t=new AMap.Map(this.refs.bigMap,{resizeEnable:!0});this.map=t,AMap.service(["AMap.PlaceSearch"],function(){var n=new AMap.PlaceSearch({pageSize:100,typ:"汽车服务|汽车销售|汽车维修|摩托车服务|餐饮服务|购物服务|生活服务|体育休闲服务|医疗保健服务|住宿服务|风景名胜|商务住宅|政府机构及社会团体|科教文化服务|交通设施服务|金融保险服务|公司企业|道路附属设施|地名地址信息|公共设施",pageIndex:1,map:t}),r=JSON.parse(localStorage.getItem("lnglatXY")),a="<div class = 'iconfont icon-qiandaodingwei mapicon'></div>";e.marker=new AMap.Marker({map:t,content:a,position:r,offset:new AMap.Pixel(-11,-22)}),n.searchNearBy("",r,200,function(n,a){t.setZoomAndCenter(16,r),console.log(n,a),e.setState({list:a.poiList.pois})})})}},{key:"submit",value:function(){this.currentAddr&&(localStorage.setItem("locName",this.currentAddr.name),localStorage.setItem("locAddr",this.currentAddr.address),localStorage.setItem("lnglatXY",JSON.stringify([this.currentAddr.location.lng,this.currentAddr.location.lat])),location.href="index.html")}},{key:"checkAddress",value:function(e,t){console.log(e),this.state.list.forEach(function(e,t){e.ischecked=!1}),this.state.list[t].ischecked=!0,this.setState({list:this.state.list}),this.currentAddr=e,this.map.setCenter([e.location.lng,e.location.lat]),this.marker.setPosition([e.location.lng,e.location.lat])}},{key:"render",value:function(){var e=this;return c["default"].createElement("div",null,c["default"].createElement("div",{ref:"bigMap",id:"bigMapcontainer",className:"bigMap"}),c["default"].createElement("div",{ref:"panel",className:"panel",id:"panel"},c["default"].createElement("div",{className:"amap_lib_placeSearch"},c["default"].createElement("div",{className:"amap_lib_placeSearch_list"},c["default"].createElement("ul",null,this.state.list.map(function(t,n){return c["default"].createElement("li",{className:t.ischecked?"poibox  active":"poibox",onClick:e.checkAddress.bind(e,t,n)},c["default"].createElement("h3",{className:"poi-title"},c["default"].createElement("span",{className:"poi-name"},t.name)),c["default"].createElement("div",{className:"poi-info"},c["default"].createElement("p",{className:"poi-addr"},"地址：",t.address)))}))))),c["default"].createElement("div",{className:"btnBottom",onClick:this.submit.bind(this)},"确定"))}}]),t}(f);t["default"]=d},125:function(e,t){"use strict"},126:function(e,t){"use strict"},127:function(e,t){"use strict"},128:function(e,t){"use strict"},129:function(e,t){"use strict"},130:function(e,t,n){function r(e,t){var n="undefined"==typeof document?c:u.parse(document.cookie),r=n&&n[e];if(!t)try{r=JSON.parse(r)}catch(a){}return r}function a(e,t,n){c[e]=t,"object"==typeof t&&(c[e]=JSON.stringify(t)),"undefined"!=typeof document&&(document.cookie=u.serialize(e,c[e],n)),s&&s.cookie&&s.cookie(e,t,n)}function o(e,t){delete c[e],"undefined"==typeof t?t={}:"string"==typeof t&&(t={path:t}),"undefined"!=typeof document&&(t.expires=new Date(1970,1,1,0,0,1),document.cookie=u.serialize(e,"",t)),s&&s.clearCookie&&s.clearCookie(e,t)}function i(e){c=e?u.parse(e):{}}function l(e,t){e.cookie?c=e.cookie:e.cookies?c=e.cookies:e.headers&&e.headers.cookie?i(e.headers.cookie):c={},s=t}var u=n(131),c={},s=void 0,f={load:r,save:a,remove:o,setRawCookie:i,plugToRequest:l};"undefined"!=typeof window&&(window.reactCookie=f),e.exports=f},131:function(e,t){function n(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");var n={},r=t||{},i=e.split(/; */),l=r.decode||o;return i.forEach(function(e){var t=e.indexOf("=");if(!(0>t)){var r=e.substr(0,t).trim(),o=e.substr(++t,e.length).trim();'"'==o[0]&&(o=o.slice(1,-1)),void 0==n[r]&&(n[r]=a(o,l))}}),n}function r(e,t,n){var r=n||{},a=r.encode||i;if(!l.test(e))throw new TypeError("argument name is invalid");var o=a(t);if(o&&!l.test(o))throw new TypeError("argument val is invalid");var u=[e+"="+o];if(null!=r.maxAge){var c=r.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");u.push("Max-Age="+c)}if(r.domain){if(!l.test(r.domain))throw new TypeError("option domain is invalid");u.push("Domain="+r.domain)}if(r.path){if(!l.test(r.path))throw new TypeError("option path is invalid");u.push("Path="+r.path)}return r.expires&&u.push("Expires="+r.expires.toUTCString()),r.httpOnly&&u.push("HttpOnly"),r.secure&&u.push("Secure"),u.join("; ")}function a(e,t){try{return t(e)}catch(n){return e}}/*!
	 * cookie
	 * Copyright(c) 2012-2014 Roman Shtylman
	 * Copyright(c) 2015 Douglas Christopher Wilson
	 * MIT Licensed
	 */
t.parse=n,t.serialize=r;var o=decodeURIComponent,i=encodeURIComponent,l=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},132:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={HTML:"htmlAttributes",TITLE:"title",BASE:"base",META:"meta",LINK:"link",SCRIPT:"script",STYLE:"style"};t.TAG_NAMES=n;var r={NAME:"name",CHARSET:"charset",HTTPEQUIV:"http-equiv",REL:"rel",HREF:"href",PROPERTY:"property",SRC:"src",INNER_HTML:"innerHTML",CSS_TEXT:"cssText"};t.TAG_PROPERTIES=r;var a={charset:"charSet","http-equiv":"httpEquiv"};t.REACT_TAG_MAP=a},133:function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,o);if(void 0!==l){if("value"in l)return l.value;var u=l.get;if(void 0===u)return;return u.call(i)}var c=Object.getPrototypeOf(a);if(null===c)return;e=c,t=o,n=i,r=!0,l=c=void 0}},u=n(3),c=r(u),s=function(e){function t(){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return null}}]),t}(c["default"].Component);t["default"]=s,e.exports=t["default"]},134:function(e,t,n){function r(e){return null===e||void 0===e}function a(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:!(e.length>0&&"number"!=typeof e[0]):!1}function o(e,t,n){var o,s;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return u(t)?(e=i.call(e),t=i.call(t),c(e,t,n)):!1;if(a(e)){if(!a(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var f=l(e),d=l(t)}catch(p){return!1}if(f.length!=d.length)return!1;for(f.sort(),d.sort(),o=f.length-1;o>=0;o--)if(f[o]!=d[o])return!1;for(o=f.length-1;o>=0;o--)if(s=f[o],!c(e[s],t[s],n))return!1;return typeof e==typeof t}var i=Array.prototype.slice,l=n(136),u=n(135),c=e.exports=function(e,t,n){return n||(n={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:o(e,t,n)}},135:function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var a="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=a?n:r,t.supported=n,t.unsupported=r},136:function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},137:function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(o){return!1}}var a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,i,l=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)a.call(r,c)&&(l[c]=r[c]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(r);for(var s=0;s<i.length;s++)o.call(r,i[s])&&(l[i[s]]=r[i[s]])}}return l}},138:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),u=r(l),c=n(139),s=r(c),f=n(140),d=r(f);e.exports=function(e,t,n){function r(e){return e.displayName||e.name||"Component"}if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(c){function f(){m=e(p.map(function(e){return e.props})),h.canUseDOM?t(m):n&&(m=n(m))}if("function"!=typeof c)throw new Error("Expected WrappedComponent to be a React component.");var p=[],m=void 0,h=function(e){function t(){a(this,t),e.apply(this,arguments)}return o(t,e),t.peek=function(){return m},t.rewind=function(){if(t.canUseDOM)throw new Error("You may ony call rewind() on the server. Call peek() to read the current state.");var e=m;return m=void 0,p=[],e},t.prototype.shouldComponentUpdate=function(e){return!d["default"](e,this.props)},t.prototype.componentWillMount=function(){p.push(this),f()},t.prototype.componentDidUpdate=function(){f()},t.prototype.componentWillUnmount=function(){var e=p.indexOf(this);p.splice(e,1),f()},t.prototype.render=function(){return u["default"].createElement(c,this.props)},i(t,null,[{key:"displayName",value:"SideEffect("+r(c)+")",enumerable:!0},{key:"canUseDOM",value:s["default"].canUseDOM,enumerable:!0}]),t}(l.Component);return h}}},139:function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},140:function(e,t){"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var o=r.bind(t),i=0;i<n.length;i++)if(!o(n[i])||e[n[i]]!==t[n[i]])return!1;return!0}var r=Object.prototype.hasOwnProperty;e.exports=n}});